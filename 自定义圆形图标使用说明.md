# è‡ªå®šä¹‰åœ†å½¢å›¾æ ‡ä½¿ç”¨è¯´æ˜

## åŠŸèƒ½æ¦‚è¿°

æ‚¨ç°åœ¨å·²ç»æˆåŠŸå®ç°äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„åœ†å½¢å›¾æ ‡ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½
- **åŒåœ†è®¾è®¡**ï¼šå¤§åœ†åœ¨ä¸‹å±‚ï¼ˆå¤–éƒ¨ï¼‰ï¼Œå°åœ†åœ¨ä¸Šå±‚ï¼ˆå†…éƒ¨ï¼‰
- **åŠ¨æ€é¢œè‰²**ï¼šæ”¯æŒ20ç§é¢„å®šä¹‰é¢œè‰²ï¼Œç‚¹å‡»å¯åˆ‡æ¢
- **æ™ºèƒ½é€æ˜åº¦**ï¼šå¤–éƒ¨åœ†çš„é¢œè‰²è‡ªåŠ¨è®¡ç®—ï¼ˆå†…éƒ¨é¢œè‰²å˜ä¸ºåŠé€æ˜ï¼‰
- **ä¿ç•™åŸåŠŸèƒ½**ï¼šCallå›¾æ ‡åŠŸèƒ½å®Œæ•´ä¿ç•™

### ğŸ¨ é¢œè‰²åˆ—è¡¨
å½“å‰æ”¯æŒçš„é¢œè‰²åŒ…æ‹¬ï¼š
- çº¢è‰²ã€ç»¿è‰²ã€è“è‰²ã€é»„è‰²ã€é’è‰²
- æ´‹çº¢ã€æ©™è‰²ã€ç´«è‰²ã€ç²‰è‰²ã€æ£•è‰²
- ç°è‰²ã€é»‘è‰²ã€ç™½è‰²
- é©¬éæ£•è‰²ã€é…¸æ©™ç»¿ã€æ·±é’è‰²
- ä¸­ç­‰ç´«è‰²ã€ç•ªèŒ„çº¢ã€æµ…æµ·ç»¿ã€æ¢…çº¢è‰²

## ä½¿ç”¨æ–¹æ³•

### 1. åŸºæœ¬ä½¿ç”¨

```kotlin
@Composable
fun MyFloatingWindow() {
    val colorList = ColorUtils.predefinedColors
    var currentIndex by remember { mutableStateOf(0) }
    
    FloatingActionButton(
        modifier = Modifier.dragFloatingWindow(),
        onClick = {
            currentIndex = (currentIndex + 1) % colorList.size
        }
    ) {
        CustomCircleIcon(
            innerColor = colorList[currentIndex].first,
            size = 24.dp
        )
    }
}
```

### 2. è‡ªå®šä¹‰é¢œè‰²

```kotlin
// ä½¿ç”¨è‡ªå®šä¹‰é¢œè‰²åˆ—è¡¨
val myColors = listOf(
    Color.Red to "æˆ‘çš„çº¢è‰²",
    Color.Blue to "æˆ‘çš„è“è‰²",
    Color.Green to "æˆ‘çš„ç»¿è‰²"
)

CustomCircleIcon(
    innerColor = myColors[0].first,
    outerColor = Color.LightGray, // è‡ªå®šä¹‰å¤–éƒ¨é¢œè‰²
    size = 32.dp,
    innerRadiusRatio = 0.8f // è‡ªå®šä¹‰æ¯”ä¾‹
)
```

### 3. é«˜çº§ç”¨æ³•

```kotlin
// ä½¿ç”¨é¢œè‰²å·¥å…·ç±»
val baseColor = Color.Red
val brighterColor = baseColor.increaseBrightness(0.1f) // å¢åŠ 10%äº®åº¦
val darkerColor = baseColor.decreaseBrightness(0.1f)   // å‡å°‘10%äº®åº¦

CustomCircleIcon(
    innerColor = baseColor,
    outerColor = brighterColor,
    size = 48.dp
)
```

## ç»„ä»¶è¯´æ˜

### CustomCircleIcon
ä¸»è¦çš„åœ†å½¢å›¾æ ‡ç»„ä»¶

**å‚æ•°ï¼š**
- `innerColor: Color` - å†…éƒ¨å°åœ†çš„é¢œè‰²
- `outerColor: Color?` - å¤–éƒ¨å¤§åœ†çš„é¢œè‰²ï¼ˆå¯é€‰ï¼Œé»˜è®¤è‡ªåŠ¨è®¡ç®—ï¼‰
- `size: Dp` - å›¾æ ‡å¤§å°ï¼ˆé»˜è®¤24.dpï¼‰
- `innerRadiusRatio: Float` - å†…éƒ¨åœ†æ¯”ä¾‹ï¼ˆé»˜è®¤0.7ï¼‰

### ColorUtils
é¢œè‰²å·¥å…·ç±»ï¼Œæä¾›é¢œè‰²å¤„ç†åŠŸèƒ½

**ä¸»è¦æ–¹æ³•ï¼š**
- `calculateBrightness(color)` - è®¡ç®—é¢œè‰²äº®åº¦
- `increaseBrightness(color, increment)` - å¢åŠ äº®åº¦
- `decreaseBrightness(color, decrement)` - å‡å°‘äº®åº¦
- `predefinedColors` - é¢„å®šä¹‰é¢œè‰²åˆ—è¡¨

## æ–‡ä»¶ç»“æ„

```
app/src/main/java/com/github/only52607/compose/window/app/ui/
â”œâ”€â”€ FloatingWindowContent.kt    # ä¸»è¦çš„æ‚¬æµ®çª—å†…å®¹
â”œâ”€â”€ ColorUtils.kt               # é¢œè‰²å·¥å…·ç±»
â”œâ”€â”€ CustomCircleIcon.kt         # è‡ªå®šä¹‰åœ†å½¢å›¾æ ‡ç»„ä»¶
â””â”€â”€ FloatingWindowViewModel.kt  # ViewModel
```

## è‡ªå®šä¹‰é€‰é¡¹

### 1. ä¿®æ”¹é¢œè‰²åˆ—è¡¨

åœ¨ `ColorUtils.kt` ä¸­ä¿®æ”¹ `predefinedColors`ï¼š

```kotlin
val predefinedColors = listOf(
    Color.Red to "çº¢è‰²",
    Color.Blue to "è“è‰²",
    // æ·»åŠ æ‚¨å–œæ¬¢çš„é¢œè‰²...
)
```

### 2. è°ƒæ•´é€æ˜åº¦è®¾ç½®

åœ¨ `FloatingWindowContent.kt` ä¸­ä¿®æ”¹é€æ˜åº¦è®¡ç®—ï¼š

```kotlin
// å½“å‰ï¼šæ°å¥½åŠé€æ˜
val outerColor = Color(
    red = currentColor.red,
    green = currentColor.green,
    blue = currentColor.blue,
    alpha = 0.5f // æ°å¥½åŠé€æ˜
)

// å¯ä»¥æ”¹ä¸ºå…¶ä»–é€æ˜åº¦å€¼ï¼š
val outerColor = Color(
    red = currentColor.red,
    green = currentColor.green,
    blue = currentColor.blue,
    alpha = 0.3f // æ›´é€æ˜
)

val outerColor = Color(
    red = currentColor.red,
    green = currentColor.green,
    blue = currentColor.blue,
    alpha = 0.7f // æ›´ä¸é€æ˜
)
```

### 3. è°ƒæ•´åœ†çš„æ¯”ä¾‹

```kotlin
CustomCircleIcon(
    innerColor = currentColor,
    innerRadiusRatio = 0.8f // å†…éƒ¨åœ†å 80%
)
```

## ä¿ç•™çš„Callå›¾æ ‡åŠŸèƒ½

åŸæ¥çš„Callå›¾æ ‡åŠŸèƒ½å®Œå…¨ä¿ç•™ï¼Œæ‚¨å¯ä»¥åœ¨éœ€è¦æ—¶ä½¿ç”¨ï¼š

```kotlin
@Composable
fun CallIconExample() {
    FloatingActionButton(
        modifier = Modifier.dragFloatingWindow(),
        onClick = { /* ç‚¹å‡»äº‹ä»¶ */ }
    ) {
        Icon(Icons.Filled.Call, "ç”µè¯å›¾æ ‡")
    }
}
```

## è¿è¡Œæ•ˆæœ

1. **å¯åŠ¨åº”ç”¨**ï¼šæ˜¾ç¤ºä¸»ç•Œé¢ï¼Œæœ‰"Show"å’Œ"Hide"æŒ‰é’®
2. **æ˜¾ç¤ºæ‚¬æµ®çª—**ï¼šç‚¹å‡»"Show"æŒ‰é’®ï¼Œæ˜¾ç¤ºè‡ªå®šä¹‰åœ†å½¢å›¾æ ‡
3. **åˆ‡æ¢é¢œè‰²**ï¼šç‚¹å‡»æ‚¬æµ®çª—å›¾æ ‡ï¼Œé¢œè‰²è‡ªåŠ¨åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ª
4. **æ˜¾ç¤ºä¿¡æ¯**ï¼šæ¯æ¬¡åˆ‡æ¢é¢œè‰²æ—¶æ˜¾ç¤ºå½“å‰é¢œè‰²åç§°
5. **æ‹–æ‹½åŠŸèƒ½**ï¼šå¯ä»¥æ‹–æ‹½æ‚¬æµ®çª—åˆ°ä»»æ„ä½ç½®
6. **éšè—æ‚¬æµ®çª—**ï¼šç‚¹å‡»"Hide"æŒ‰é’®éšè—æ‚¬æµ®çª—

## æ³¨æ„äº‹é¡¹

1. **é¢œè‰²è®¡ç®—**ï¼šå¤–éƒ¨é¢œè‰²åŸºäºå†…éƒ¨é¢œè‰²è‡ªåŠ¨è®¡ç®—ï¼Œç¡®ä¿è§†è§‰åè°ƒ
2. **æ€§èƒ½ä¼˜åŒ–**ï¼šä½¿ç”¨`remember`ç¼“å­˜è®¡ç®—ç»“æœï¼Œé¿å…é‡å¤è®¡ç®—
3. **å¯è®¿é—®æ€§**ï¼šæ‰€æœ‰é¢œè‰²éƒ½æœ‰å¯¹åº”çš„ä¸­æ–‡åç§°
4. **æ‰©å±•æ€§**ï¼šç»„ä»¶è®¾è®¡ä¸ºå¯å¤ç”¨ï¼Œä¾¿äºåœ¨å…¶ä»–åœ°æ–¹ä½¿ç”¨

## ä¸‹ä¸€æ­¥

å¦‚æœæ‚¨éœ€è¦è¿›ä¸€æ­¥è‡ªå®šä¹‰ï¼Œå¯ä»¥ï¼š
- æ·»åŠ æ›´å¤šé¢œè‰²é€‰é¡¹
- è°ƒæ•´åœ†çš„å¤§å°æ¯”ä¾‹
- æ·»åŠ åŠ¨ç”»æ•ˆæœ
- é›†æˆåˆ°å…¶ä»–ç•Œé¢ç»„ä»¶ä¸­ 